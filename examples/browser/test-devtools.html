<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevTools æµ‹è¯•é¡µé¢</title>
    <style>
        body { 
            font-family: system-ui, sans-serif; 
            padding: 20px; 
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }
        .log-box { 
            background: #f5f5f5; 
            padding: 15px; 
            border-radius: 4px; 
            height: 300px; 
            overflow-y: auto; 
            font-family: monospace; 
            border: 1px solid #ddd;
            font-size: 12px;
        }
        button { 
            padding: 10px 20px; 
            margin-right: 10px; 
            cursor: pointer;
            border: 1px solid #ccc;
            background: white;
            border-radius: 4px;
            font-size: 14px;
        }
        button:hover {
            background: #f0f0f0;
        }
        .controls {
            margin: 20px 0;
        }
        h1 {
            color: #333;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .info strong {
            color: #1976d2;
        }
    </style>
</head>
<body>
    <h1>ğŸ•’ Hyper Scheduler DevTools æµ‹è¯•</h1>
    
    <div class="info">
        <strong>æµ‹è¯•è¯´æ˜:</strong>
        <ol>
            <li>é¡µé¢åŠ è½½åï¼Œå³ä¸‹è§’ä¼šå‡ºç°ä¸€ä¸ªæ‚¬æµ®çƒ ğŸ•’</li>
            <li>ç‚¹å‡»æ‚¬æµ®çƒæ‰“å¼€ DevTools é¢æ¿</li>
            <li>ç‚¹å‡»ä¸‹æ–¹"å¯åŠ¨è°ƒåº¦å™¨"æŒ‰é’®</li>
            <li>è§‚å¯Ÿ DevTools ä¸­ä»»åŠ¡çŠ¶æ€çš„å®æ—¶å˜åŒ–</li>
            <li>å°è¯•åˆ‡æ¢ä¸»é¢˜ã€è¯­è¨€ã€å¸ƒå±€ç­‰åŠŸèƒ½</li>
        </ol>
    </div>

    <div class="controls">
        <button id="btn-start">ğŸš€ å¯åŠ¨è°ƒåº¦å™¨</button>
        <button id="btn-stop">â¹ï¸ åœæ­¢è°ƒåº¦å™¨</button>
        <button id="btn-trigger">âš¡ æ‰‹åŠ¨è§¦å‘ Cron ä»»åŠ¡</button>
    </div>

    <h3>ğŸ“‹ æ‰§è¡Œæ—¥å¿—</h3>
    <div id="logs" class="log-box"></div>

    <!-- å¼•å…¥ Hyper Scheduler (UMD) -->
    <script src="../../dist/index.umd.cjs"></script>
    
    <script>
        // æ—¥å¿—è¾…åŠ©å‡½æ•°
        const logBox = document.getElementById('logs');
        function log(msg, type = 'info') {
            const line = document.createElement('div');
            const time = new Date().toLocaleTimeString('zh-CN', { hour12: false });
            const colors = {
                info: '#666',
                success: '#4caf50',
                error: '#f44336',
                warning: '#ff9800'
            };
            line.style.color = colors[type] || colors.info;
            line.textContent = `[${time}] ${msg}`;
            logBox.appendChild(line);
            logBox.scrollTop = logBox.scrollHeight;
            console.log(msg);
        }

        const { Scheduler } = window.HyperScheduler;
        
        // åˆ›å»ºè°ƒåº¦å™¨å®ä¾‹
        log('åˆ›å»ºè°ƒåº¦å™¨å®ä¾‹...', 'info');
        const scheduler = new Scheduler({ debug: true });

        // åˆ›å»ºä»»åŠ¡ï¼ˆåœ¨ attachDevTools ä¹‹å‰ï¼‰
        log('æ³¨å†Œä»»åŠ¡...', 'info');
        
        scheduler.createTask({
            id: 'cron-task-2s',
            schedule: '*/2 * * * * *', // æ¯ 2 ç§’
            handler: () => {
                log('âœ… Cron ä»»åŠ¡ (æ¯2ç§’) æ‰§è¡Œå®Œæˆ', 'success');
            }
        });

        scheduler.createTask({
            id: 'interval-task-5s',
            schedule: '5s', // æ¯ 5 ç§’
            handler: () => {
                log('âœ… Interval ä»»åŠ¡ (æ¯5ç§’) æ‰§è¡Œå®Œæˆ', 'success');
            }
        });

        scheduler.createTask({
            id: 'demo-task-10s',
            schedule: '10s',
            tags: ['demo', 'browser', 'test'],
            handler: () => {
                log('âœ… Demo ä»»åŠ¡ (æ¯10ç§’) æ‰§è¡Œå®Œæˆ', 'success');
            }
        });

        log('ä»»åŠ¡æ³¨å†Œå®Œæˆï¼Œå…± 3 ä¸ªä»»åŠ¡', 'info');

        // æŒ‚è½½ DevTools UIï¼ˆåœ¨åˆ›å»ºä»»åŠ¡ä¹‹åï¼‰
        log('æŒ‚è½½ DevTools UI...', 'info');
        scheduler.attachDevTools({ theme: 'auto' }).then(() => {
            log('âœ… DevTools å·²å°±ç»ªï¼ç‚¹å‡»å³ä¸‹è§’æ‚¬æµ®çƒæ‰“å¼€é¢æ¿', 'success');
        });
        
        // ç»‘å®šæŒ‰é’®äº‹ä»¶
        document.getElementById('btn-start').onclick = () => {
            scheduler.start();
            log('ğŸš€ è°ƒåº¦å™¨å·²å¯åŠ¨', 'success');
        };

        document.getElementById('btn-stop').onclick = () => {
            scheduler.stop();
            log('â¹ï¸ è°ƒåº¦å™¨å·²åœæ­¢', 'warning');
        };

        document.getElementById('btn-trigger').onclick = () => {
            scheduler.triggerTask('cron-task-2s');
            log('âš¡ æ‰‹åŠ¨è§¦å‘ cron-task-2s', 'info');
        };

        log('âœ… é¡µé¢åˆå§‹åŒ–å®Œæˆ', 'success');
    </script>
</body>
</html>
